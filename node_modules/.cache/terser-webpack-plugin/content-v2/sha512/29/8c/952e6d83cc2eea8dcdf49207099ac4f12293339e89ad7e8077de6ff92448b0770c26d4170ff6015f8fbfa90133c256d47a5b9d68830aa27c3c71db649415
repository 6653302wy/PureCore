{"code":"!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\",o(o.s=0)}([function(t,e,o){t.exports=o(1)},function(t,e,o){\"use strict\";function r(){this._keys=[],this._values=[]}o.r(e);var n=(r.prototype.set=function(t,e){var o=this.indexOf(t);0<=o?this._values[o]=e:(this._keys.push(t),this._values.push(e))},r.prototype.get=function(t){var e=this.indexOf(t);return e<0?null:this._values[e]},r.prototype.remove=function(t){var e=this.indexOf(t);return 0<=e&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},r.prototype.clear=function(){this._values.length=0,this._keys.length=0},Object.defineProperty(r.prototype,\"values\",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"keys\",{get:function(){return this._keys},enumerable:!0,configurable:!0}),r.prototype.indexOf=function(t){var e=this._keys.indexOf(t);return 0<=e?e:(t=\"string\"==typeof t?Number(t):\"number\"==typeof t?t.toString():t,this._keys.indexOf(t))},r);function i(){}var a=(i.getFUIImg=function(t){return i.ImageUrl+t+\".png\"},i.Debug_panel=!0,i.Debug_log=!0,i.Platform=0,i.CurrServerUrl=\"\",i.Version=\"1.0.0\",i.ImageUrl=\"res/GIMG/\",i);function s(){}var u,l,c=(s.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];a.Debug_log&&(1<e.length?console.log(t,e):1==e.length?console.log(t,e[0]):console.log(t))},s.err=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];a.Debug_log&&(1<e.length?console.error(t,e):1==e.length?console.error(t,e[0]):console.error(t))},s.alert=function(t){a.Debug_log&&alert(t)},s);function p(){var t=l.call(this)||this;return t.resGroupPool={},t}var h,d,f=((u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(p,l=Laya.EventDispatcher),p.getinstance=function(){return p._instance?p._instance:p._instance=new p},p.prototype.getResArray=function(t){return p.CUR_GROUP_URLS=[],p.CUR_GROUP_URLS_FORMAT=[],this.resGroupPool[t]?this.resGroupPool[t]:(this.loadGroup(t),this.resGroupPool[t]=p.CUR_GROUP_URLS_FORMAT,p.CUR_GROUP_URLS_FORMAT)},p.prototype.getNameFromPool=function(t){return this.resGroupPool[t]},p.prototype.loadGroup=function(t){if(!t.length)return c.log(\"资源组名称不能为空！\"+t),\"\";p.CUR_GROUP_NAME=t,this.onLoaded()},p.prototype.onLoaded=function(){this.jsonData||(this.jsonData=O.ins.getRes(p.RES_GROUP),O.ins.clearRes(p.RES_GROUP)),this.initGroupKey(this.jsonData)},p.prototype.initGroupKey=function(t){if(t){p.CUR_GROUP_KEYS=\"\";for(var e=t.groups.length,o=null,r=0;r<e;++r)if(p.CUR_GROUP_NAME===t.groups[r].name){p.CUR_GROUP_KEYS=t.groups[r].keys,o=t.groups[r];break}o?\"\"!==p.CUR_GROUP_KEYS?this.initResUrl(t):c.log(p.CUR_GROUP_NAME+\" 资源组内容为空！\"):c.log(p.CUR_GROUP_NAME+\" 资源组名字不存在！\")}else c.log(\"资源配置json文件读取错误！\")},p.prototype.initResUrl=function(t){if(t&&\"\"!==p.CUR_GROUP_KEYS){var e=p.CUR_GROUP_KEYS.split(\",\"),o=e.length,r=t.resources.length;p.CUR_GROUP_URLS=[],p.CUR_GROUP_URLS_FORMAT=[];for(var n=0;n<o;++n)for(var i=e[n],a=0;a<r;++a){var s=t.resources[a];if(\"atlas\"===s.type&&s.name===i){p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.ATLAS});break}if(\"json\"===s.type&&s.name===i)p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.JSON});else if(\"sound\"===s.type&&s.name===i)p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.SOUND});else if(\"xml\"===s.type&&s.name===i)p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.XML});else if(\"buffer\"!==s.type&&\"sprite3d\"!==s.type||s.name!==i){if(\"image\"===s.type&&s.name===i)p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.IMAGE});else if(s.name===i&&this.isJpgFormat(s.name)){p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.IMAGE});break}}else p.CUR_GROUP_URLS.push(s.url),p.CUR_GROUP_URLS_FORMAT.push({url:s.url,type:Laya.Loader.BUFFER})}}},p.prototype.isJpgFormat=function(t){if(t){var e=t.length;if(e<=3)return!1}return\"jpg\"===t[e-3]+t[e-2]+t[e-1]||\"ebp\"==t[e-3]+t[e-2]+t[e-1]},p.RES_GROUP=\"resGroup.json\",p.CUR_GROUP_NAME=\"\",p.CUR_GROUP_KEYS=\"\",p.CUR_GROUP_URLS=[],p.CUR_GROUP_URLS_FORMAT=[],p._instance=null,p);function y(){var t=d.call(this)||this;return t.regModules={},t._moduleDynamicList={},t._loadModuleLen=0,t.loadingModules=[],t._info={},t.moduleIsLoading=!1,t}var g=((h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(y,d=Laya.EventDispatcher),Object.defineProperty(y,\"inst\",{get:function(){return null==this._instance?this._instance=new y:this._instance},enumerable:!0,configurable:!0}),y.prototype.setup=function(t,e){this._stage=t,this._fa=e},y.prototype.registerModule=function(t,e){this.regModules[t+\"\"]=e},y.prototype.StartModule=function(t){var e=this;t instanceof Array?(this._loadModuleLen=t.length,t.forEach((function(t){e.addModule(t.key,t.info?t.info:null,t.dynaimcList?t.dynaimcList:null)}))):(this._loadModuleLen=1,this.addModule(t.key,t.info?t.info:null,t.dynaimcList?t.dynaimcList:null)),this.startLoad()},y.prototype.addModule=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null);var r={key:t,info:e,dynamicList:o};this.loadingModules.push(r)},y.prototype.startLoad=function(){this.loadNext()},y.prototype.loadNext=function(){if(null==this.modules&&(this.modules={}),!this.moduleIsLoading&&this.loadingModules.length){var t=this.loadingModules.shift(),e=t.key;this._info[e]=t.info,this._moduleDynamicList[e]=t.dynamicList;var o=this.getModule(e);o?(o.start(this._fa,this._info[e]),this.loadNext()):(o=this.newModuleByKey(e))?(this.modules[e]=o,this.loadModule(o,e)):this.loadNext()}},y.prototype.loadModule=function(t,e){var o=t.getResGroup();c.log(e+\" 模块所需资源组列表====\",o.toString());var r=[];o.forEach((function(t){var e=f.getinstance().getResArray(t);r=r.concat(e)}));var n=this._moduleDynamicList[e];n&&n.length&&(r=r.concat(n)),0<r.length?O.ins.loadRes(r,Laya.Handler.create(this,this.startModule,[t,e]),e):(this._loadModuleLen--,this.moduleIsLoading=!1,this.startModule(t,e))},y.prototype.startModule=function(t,e){this.moduleIsLoading=!1,t&&(c.log(\"启动模块 。。\"+e),t.start(this._fa,this._info[e]),t=null),this.loadNext()},y.prototype.killModule=function(t,e){void 0===e&&(e=!1);var o=this.modules[t];o&&(c.log(\"销毁模块=====\",t),o.dispose(),delete this.modules[t],e&&this.clearResGroup(t))},y.prototype.clearResGroup=function(t){O.ins.clearRes(null,t)},y.prototype.checkMoudleExist=function(t){return!!this.getModule(t)},y.prototype.killAllModule=function(){for(var t in this.modules)this.killModule(t)},y.prototype.getModule=function(t){return null==this.modules?null:this.modules[t]},y.prototype.newModuleByKey=function(t){var e,o=this.regModules[t+\"\"];return o&&(e=new o),e},y._instance=null,y);function _(){}var L=(_.getSingle=function(t){var e;return t.hasOwnProperty(\"_inst\")&&(e=t._inst),e||(e=new t,Object.defineProperty(t,\"_inst\",{value:e})),e},_.isArray=function(t){return!(!t||t.constructor!=Array)},_.addMixSortToArr=function(){Array.prototype.shuffle||(Array.prototype.shuffle=function(){for(var t,e,o=this.length;o;t=parseInt((Math.random()*o).toString()),e=this[--o],this[o]=this[t],this[t]=e);})},_.getNoRepeatListFromArr=function(t,e){void 0===e&&(e=null);for(var o=[],r=0;r<t.length;r++)e?-1==o.indexOf(t[r][e])&&o.push(t[r][e]):-1==o.indexOf(t[r])&&o.push(t[r]);return o},_.deepCopy=function(t){return JSON.parse(JSON.stringify(t))},_.deepCopyArr=function(t){return t.slice()},_.StringParseToNumberArray=function(t,e){if(!t)return null;for(var o=t.split(e),r=[],n=0;n<o.length;n++)r.push(+o[n]);return r},_.TimeLineFunction=function(t,e,o){for(var r=0,n=function(n){var a=n<t.length?t[n]:0;r+=a,Laya.timer.once(r,i,(function(){(0,e[n].func)(e[n].arg),n>=e.length-1&&o&&o()}))},i=this,a=0;a<e.length;a++)n(a)},_.GetRandom=function(t){var e=Math.random()*t.length;return t[Math.floor(e)]},_.GetRandomNumInt=function(t,e){var o=e-t,r=Math.random();return t+Math.round(r*o)},_.GetRandomNum=function(t,e){var o=e-t;return t+Math.random()*o},_.BezierTween=function(t,e,o,r,n,i,a,s){function u(t,e,o,r){this.t=0,this.obj=r,this.p0=t,this.p1=e,this.p2=o}var l=(Object.defineProperty(u.prototype,\"factor\",{get:function(){return this.t},set:function(t){this.t=t,this.obj.x=(1-t)*(1-t)*this.p0.x+2*t*(1-t)*this.p1.x+t*t*this.p2.x,this.obj.y=(1-t)*(1-t)*this.p0.y+2*t*(1-t)*this.p1.y+t*t*this.p2.y},enumerable:!0,configurable:!0}),new u(t,e,o,r));return Laya.Tween.to(l,{factor:1},n,a,s,i,!1)},_.getObjKeys=function(t){var e=[];for(var o in t)e.push(o);return e},_.isImgRes=function(t){var e=this.getFileType(t);return-1!=[\"png\",\"jpg\",\"jpeg\",\"gif\",\"bmp\",\"webp\"].indexOf(e)},_.isD3Res=function(t){var e=this.getFileType(t);return-1!=[\"ls\",\"lh\"].indexOf(e)},_.isAtlasRes=function(t){var e=this.getFileType(t);return-1!=[\"atlas\"].indexOf(e)},_.getFileType=function(t){return Laya.Utils.getFileExtension(t)},_.isIOS=function(){return!!window.navigator.userAgent.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)},_.check_support_webp=function(){if(_.isIOS)return!1;try{return 0==window.document.createElement(\"canvas\").toDataURL(\"image/webp\").indexOf(\"data:image/webp\")}catch(t){return!1}},_.setLocalCache=function(t,e){Laya.LocalStorage.setItem(t,e)},_.getLocalCache=function(t){return Laya.LocalStorage.getItem(t)},_.deleteLocalCache=function(t){Laya.LocalStorage.removeItem(t)},_.SendFacade=function(t,e,o){puremvc.Facade.getInstance().sendNotification(t,e,o)},_.Handler=function(t,e,o,r){return void 0===o&&(o=null),void 0===r&&(r=!0),Laya.Handler.create(t,e,o,r)},_.openMod=function(t,e,o){if(void 0===e&&(e=null),void 0===o&&(o=null),t instanceof Array){for(var r=[],n=0;n<t.length;n++){var i={};i.key=t[n],e&&e[n]&&(i.info=e[n]),o&&o[n]&&(i.dynaimcList=o[n]),r.push(i)}g.inst.StartModule(r)}else g.inst.StartModule({key:t,info:e||null,dynaimcList:o||null})},_.closeMod=function(t){t instanceof Array?t.forEach((function(t){g.inst.killModule(t)})):g.inst.killModule(t)},_.setLanType=function(t){var e;switch(t){case\"TW\":case\"HK\":case\"MO\":e=\"tw\";break;case\"CN\":case\"zh\":e=\"cn\";break;default:e=t}a.Language=e},_.getColorFilter=function(t,e,o){return new Laya.ColorFilter([t/255,0,0,0,0,0,e/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0])},_);function m(){this.errHdrList=new n,this.loaderList=new n,this.isLoaing=!1,this.d2ResLoadCom=!1,this.d3ResLoadCom=!1,this.totalCheckTime=2e4,this.checkRate=5e3,Laya.loader.on(Laya.Event.ERROR,this,this.onLoaingError)}var R,v,O=(Object.defineProperty(m,\"ins\",{get:function(){return null==this._instance?this._instance=new m:this._instance},enumerable:!0,configurable:!0}),m.prototype.loadRes=function(t,e,o,r,n,i,a){var s;if(void 0===e&&(e=null),void 0===o&&(o=null),void 0===r&&(r=0),void 0===n&&(n=null),void 0===i&&(i=!1),void 0===a&&(a=!0),t instanceof Array){var u=this.getRealUrl(t[0])+\"_group\";s=null==o?this.getRealUrl(u):o}else s=null==o?this.getRealUrl(t):o;if(this.checkAllLoaded(t))return c.log(s+\" 已下载，直接返回回调。。\"),void(e&&e.run());if(this.loaderList.get(s)){var l=this.loaderList.get(s).cb;if(!l||!e||e==l)return c.log(\"有重复提交的加载请求，请检查代码=======\"),void this.loadNext();s+=\"_1\"}this.loaderList.set(s,{url:t,cb:e,wait:r,static:i,needscb:a}),n&&this.errHdrList.set(s,{url:t,cb:n}),this.loadNext()},m.prototype.loadResGroup=function(t,e,o,r,n,i){void 0===e&&(e=null),void 0===o&&(o=0),void 0===r&&(r=null),void 0===n&&(n=!1),void 0===i&&(i=!0);var a=f.getinstance().getResArray(t);a&&a.length&&this.loadRes(a,e,t,o,r,n,i)},m.prototype.getRes=function(t){return Laya.loader.getRes(t)},m.prototype.clearRes=function(t,e){void 0===e&&(e=null),Laya.loader.clearRes(t)},m.prototype.cancleLoader=function(t){t instanceof Array?Laya.loader.cancelLoadByUrls(t):Laya.loader.cancelLoadByUrl(t)},m.prototype.loadNext=function(){var t=this;if(!this.isLoaing&&0!=this.loaderList.keys.length){this.curLoadGroup=this.loaderList.keys[0];var e=this.loaderList.get(this.curLoadGroup).url;this.curWaitTime=this.loaderList.get(this.curLoadGroup).wait;var o=[],r=[],n=function(e){var n=t.getRealUrl(e);L.isD3Res(n)?r.push(n):\"string\"==typeof e?o.push({url:e,type:null}):o.push(e)};e instanceof Array?e.forEach((function(t){n(t)})):n(e),this.d2ResLoadCom=!Boolean(o.length),this.d3ResLoadCom=!Boolean(r.length),this.d2ResLoadCom&&this.d3ResLoadCom||this.startLoad(o,r)}},m.prototype.startLoad=function(t,e){this.isLoaing=!0,this.startTime=(new Date).getTime(),0<this.curWaitTime&&Laya.timer.loop(10,this,this.waitingTimerHdr),Laya.timer.loop(this.checkRate,this,this.checkLoadingStateHdr),t.length&&Laya.loader.load(t,L.Handler(this,this.onD2LoadingComHdr),Laya.Handler.create(this,this.onLoadingProgressHdr,null,!1),null,1,!0,this.curLoadGroup),e.length&&Laya.loader.create(e,L.Handler(this,this.onD3LoadingComHdr),Laya.Handler.create(this,this.onLoadingProgressHdr,null,!1))},m.prototype.onD2LoadingComHdr=function(t){null!=t&&0!=t||(c.log(this.curLoadGroup+\" 2d资源加载未完成。。\"),this.loaderList.get(this.curLoadGroup).needscb)?(this.d2ResLoadCom=!0,this.d2ResLoadCom&&this.d3ResLoadCom&&this.loadingComHdr(t)):this.stopCheck()},m.prototype.onD3LoadingComHdr=function(t){null!=t&&0!=t||(c.log(this.curLoadGroup+\" 3d资源加载未完成。。\"),this.loaderList.get(this.curLoadGroup).needscb)?(this.d3ResLoadCom=!0,this.d2ResLoadCom&&this.d3ResLoadCom&&this.loadingComHdr(t)):this.stopCheck()},m.prototype.loadingComHdr=function(t){this.isLoaing=!1,this.stopWaiting(),this.stopCheck();var e=this.curLoadGroup,o=(new Date).getTime()-this.startTime;t?c.log(this.curLoadGroup+\" 加载完成，所用时长：\"+o+\" ms\"):c.log(this.curLoadGroup+\" 加载未完成，所用时长：\"+o+\" ms\");var r,n=this.loaderList.get(this.curLoadGroup).cb;this.loaderList.get(this.curLoadGroup+\"_1\")&&(r=this.loaderList.get(this.curLoadGroup+\"_1\").cb,this.loaderList.remove(this.curLoadGroup+\"_1\"));var i=this.loaderList.get(this.curLoadGroup).wait;if(this.loaderList.remove(this.curLoadGroup),this.curLoadGroup=null,this.loadNext(),r&&r.runWith(t),n){if(0<i&&i+10<o)return void c.log(e+\" 加载超过设定等待时间\"+i+\" ms ,不执行回调==\");n.runWith(t)}},m.prototype.waitingTimerHdr=function(){if((new Date).getTime()-this.startTime>this.curWaitTime&&(this.stopWaiting(),!this.checkAllLoaded(this.loaderList.get(this.curLoadGroup).url))){var t=this.loaderList.get(this.curLoadGroup).cb;c.log(this.curLoadGroup+\" 加载超过设定等待时间==,返回null\"),t&&t.runWith(null)}},m.prototype.stopWaiting=function(){this.curWaitTime=0,Laya.timer.clear(this,this.waitingTimerHdr)},m.prototype.checkLoadingStateHdr=function(){if(this.totalCheckTime-=this.checkRate,c.log(this.curLoadGroup+\" ===loading检测：\",this.totalCheckTime),this.totalCheckTime<=0){this.stopCheck();var t=this.loaderList.get(this.curLoadGroup).url;this.checkAllLoaded(t)?(c.log(\"检测到资源已全部下载完成--------\",this.curLoadGroup),t instanceof Array?this.loadingComHdr(!0):this.loadingComHdr(this.getRes(this.getRealUrl(t)))):c.log(\"加载超时未完成。。。。\")}},m.prototype.alertToRefresh=function(){window.alert(\"加载超时未完成,检查资源路径或网络\"),location.reload()},m.prototype.stopCheck=function(){Laya.timer.clear(this,this.checkLoadingStateHdr),this.totalCheckTime=2e4},m.prototype.onLoadingProgressHdr=function(t){},m.prototype.getFileType=function(t){return Laya.Utils.getFileExtension(t)},m.prototype.checkAllLoaded=function(t){function e(t){var e=o.getRealUrl(t);return!!Laya.loader.getRes(e)}var o=this,r=!0;if(t instanceof Array)for(var n=0;n<t.length&&(r=e(t[n]));n++);else r=e(t);return r},m.prototype.getRealUrl=function(t){return\"string\"==typeof t?t:t.url},m.prototype.onLoaingError=function(t){var e,o=this;this.isLoaing=!1,Laya.loader.clearRes(t),this.errHdrList.keys.forEach((function(r){if(e)return!1;var n=o.errHdrList.get(r);if(n.url instanceof Array)n.url.forEach((function(r){if(o.getRealUrl(r)==t)return e=n.cb,!1}));else if(o.getRealUrl(n.url)==t)return e=n.cb,o.errHdrList.remove(r),!1})),e&&e.runWith(t)},m._instance=null,m);function M(){var t=v.call(this)||this;return t.imgurl=\"\",t}var U=((R=function(t,e){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(M,v=fgui.GLoader),M.prototype.loadExternal=function(){this.imgurl==this.url?this.displayObject.visible=!0:this.url?(\"atlas\"!=this.url.split(\"/\")[0]?-1!=this.url.indexOf(\"gif\")||-1!=this.url.indexOf(\"webp\")?this.imgurl=a.ImageUrl+this.url:this.imgurl=a.getFUIImg(this.url):\"http\"==this.url.slice(0,4)?this.imgurl=this.url:this.imgurl=\"res/\"+this.url+\".png\",O.ins.loadRes(this.imgurl,Laya.Handler.create(this,this.onLoadSuccess))):(this.displayObject.visible=!1,Laya.loader.clearTextureRes(this.imgurl))},M.prototype.freeExternal=function(t){this.displayObject.visible=!1,Laya.loader.clearTextureRes(this.imgurl)},M.prototype.onLoadSuccess=function(){var t=O.ins.getRes(this.imgurl);this.displayObject.visible=!0,t?this.onExternalLoadSuccess(t):this.url=null},M);function b(){}var P=(b.prototype.EnterState=function(t){this.cb=t.comCb,this.error=t.errCb},b.prototype.ExitState=function(){},b.prototype.onComplete=function(){this.cb&&this.cb.run()},b.prototype.onError=function(){this.error&&this.error.run()},b);function S(){}var C,G,E=(S.LAOGING=\"loading\",S.LAOGING_MEDIATOR=\"LAOGING_MEDIATOR\",S.HOME_PANEL=\"HOME_PANEL\",S.HOME_PANEL_MEDIATOR=\"HOME_PANEL_MEDIATOR\",S.GAME_LEVEL=\"GAME_LEVEL\",S.GAME_LEVEL_MEDIATOR=\"GAME_LEVEL_MEDIATOR\",S.NET=\"NET\",S.NET_MEDIATOR=\"NET_Mediator\",S.NET_PROXY=\"NET_PROXY\",S);function A(){return null!==G&&G.apply(this,arguments)||this}var w,N,x=((C=function(t,e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(A,G=P),A.prototype.EnterState=function(t){G.prototype.EnterState.call(this,t),L.openMod(E.HOME_PANEL)},A.prototype.ExitState=function(){L.closeMod(E.HOME_PANEL)},A.prototype.onComplete=function(){},A);function T(){return null!==N&&N.apply(this,arguments)||this}var j,k,I=((w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(T,N=P),T.prototype.EnterState=function(t){N.prototype.EnterState.call(this,t),L.openMod(E.GAME_LEVEL)},T.prototype.ExitState=function(){L.closeMod(E.GAME_LEVEL)},T.prototype.onComplete=function(){},T);function F(){return null!==k&&k.apply(this,arguments)||this}var H,D,K=((j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(F,k=P),F.prototype.EnterState=function(t){k.prototype.EnterState.call(this,t),L.openMod(E.LAOGING)},F.prototype.ExitState=function(){L.closeMod(E.LAOGING)},F.prototype.onComplete=function(){},F);function V(){this.mFSMList=new n,this.mFSMList.set(H.Loading,new K),this.mFSMList.set(H.Home,new x),this.mFSMList.set(H.Level,new I)}(D=H=H||{})[D.UnKnow=0]=\"UnKnow\",D[D.Loading=1]=\"Loading\",D[D.Home=2]=\"Home\",D[D.Level=3]=\"Level\";var B=(Object.defineProperty(V,\"inst\",{get:function(){return V._instance||(V._instance=new V),V._instance},enumerable:!0,configurable:!0}),V.prototype.EnterGoalGameState=function(t){V.mCurrPlayState!==H.UnKnow&&t===V.mCurrPlayState||this.ChangeState(t)},V.prototype.ChangeState=function(t){V.mNewState=t,this.state=this.mFSMList.get(t),this.state&&(c.log(\"切换场景========\",this.state),V.mCurrPlayState!=H.UnKnow&&this.mFSMList.get(V.mCurrPlayState).ExitState(),V.mPriorPlayState=V.mCurrPlayState,V.mCurrPlayState=V.mNewState,this.state.EnterState({comCb:Laya.Handler.create(this,this.onComCallBack),errCb:Laya.Handler.create(this,this.onErrorCallBack)}))},V.prototype.onComCallBack=function(){c.log(\"进入新状态=====\")},V.prototype.onErrorCallBack=function(){V.mPriorPlayState!==H.UnKnow&&this.ChangeState(V.mPriorPlayState)},V.prototype.OnChangeComplete=function(t){t?V.mCurrPlayState!=H.UnKnow&&this.mFSMList.get(V.mCurrPlayState).onComplete():V.mCurrPlayState!=H.UnKnow&&this.mFSMList.get(V.mCurrPlayState).onError()},V.mCurrPlayState=H.UnKnow,V.mPriorPlayState=H.UnKnow,V.mNewState=H.UnKnow,V),W=(Y.init=function(){},Y.width=640,Y.height=1136,Y.scaleMode=\"fixedwidth\",Y.screenMode=\"none\",Y.alignV=\"top\",Y.alignH=\"left\",Y.startScene=\"\",Y.sceneRoot=\"\",Y.debug=!1,Y.stat=!1,Y.physicsDebug=!1,Y.exportSceneToJson=!0,Y);function Y(){}var J=W;function X(){this.mPlatAdReady=!1}W.init();var z,q,Q=(Object.defineProperty(X,\"inst\",{get:function(){return L.getSingle(X)},enumerable:!0,configurable:!0}),X.prototype.init=function(){this.mPlatAdReady=!0},X.prototype.requestPayment=function(t,e,o,r){void 0===r&&(r=null)},X);function Z(){this._managers={}}(q=z=z||{})[q.AD=0]=\"AD\",q[q.BUY=1]=\"BUY\";var $,tt,et=(Z.prototype.setup=function(t,e,o){void 0===o&&(o=60),this._stage=t,this._facade=e,this.super_setupManager(\"ModuleManager\",g),this.override_setup_game_managers()},Z.prototype.super_setupManager=function(t,e){var o=\"ModuleManager\"==t?g.inst:new e;o&&(this._managers[t+\"\"]?console.warn(\"[core] error manager exist already -> \"+t):((this._managers[t+\"\"]=o).setup(this._stage,this._facade),c.log(\"[core] set up manager \"+t)))},Z.prototype.super_getManager=function(t){return this._managers[t+\"\"]},Z.prototype.override_setup_game_managers=function(){throw Error(\"请使用父类的super_setupManager(key:string)方法 扩展管理器！\")},Object.defineProperty(Z.prototype,\"loaderMgr\",{get:function(){return this.super_getManager(\"LoaderManager\")},enumerable:!0,configurable:!0}),Z);function ot(t){void 0===t&&(t=[]);var e=tt.call(this)||this;return e._resGroup=[],e._resGroup=t,e}var rt,nt,it=(($=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(ot,tt=Laya.Sprite),ot.prototype.start=function(t,e){void 0===e&&(e=null),this._commandNames=[],this._mediatorNames=[],this._proxyNames=[],this._data=e,this.facade=t,this.override_registerPureMvcAndStart()},ot.prototype.dispose=function(){this._autoRemovePureMVC(),this.facade=null},ot.prototype.getResGroup=function(){return this._resGroup},ot.prototype.super_registerCommand=function(t,e){this.facade.registerCommand(t,e),this._commandNames.push(t)},ot.prototype.super_registerMediator=function(t){this.facade.registerMediator(t),this._mediatorNames.push(t.getMediatorName())},ot.prototype.super_registerProxy=function(t){this.facade.registerProxy(t),this._proxyNames.push(t.getProxyName())},ot.prototype.override_registerPureMvcAndStart=function(){throw Error(\"[core] 请在override_registerPureMvcAndStart方法里，注册puremvc相关的command,proxy,mediator\")},Object.defineProperty(ot.prototype,\"initData\",{get:function(){return this._data},enumerable:!0,configurable:!0}),ot.prototype._autoRemovePureMVC=function(){if(this._commandNames){for(var t=this._commandNames.length,e=\"\";t--;)e=this._commandNames[t],this.facade.removeCommand(e);for(t=this._mediatorNames.length;t--;)e=this._mediatorNames[t],this.facade.removeMediator(e);for(t=this._proxyNames.length;t--;)e=this._proxyNames[t],this.facade.removeProxy(e)}this._commandNames=null,this._mediatorNames=null,this._proxyNames=null},ot);function at(){return nt.call(this,E.LAOGING_MEDIATOR)||this}var st=((rt=function(t,e){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}rt(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(at,nt=puremvc.Mediator),at.prototype.listNotificationInterests=function(){return[]},at.prototype.handleNotification=function(t){t.getBody(),t.getName()},at.prototype.onRegister=function(){c.log(\"====打开loading界面==\")},at.prototype.onRemove=function(){this.view&&this.view.dispose(),this.view=null},at);function ut(){}var lt,ct,pt=(ut.Loading=\"levelData\",ut),ht=((lt=function(t,e){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}lt(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(dt,ct=it),dt.prototype.override_registerPureMvcAndStart=function(){this.super_registerMediator(new st)},dt);function dt(){return ct.call(this,[pt.Loading])||this}function ft(){}var yt,gt,_t=(ft.prototype.setupPlugins=function(){g.inst.registerModule(E.LAOGING,ht)},ft.prototype.setup=function(t,e){},ft.prototype.start=function(){},ft);function Lt(){return gt.call(this)||this}var mt=((yt=function(t,e){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}yt(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)})(Lt,gt=et),Lt.getInstance=function(){return Lt._instance||(Lt._instance=new Lt),Lt._instance},Lt.prototype.override_setup_game_managers=function(){this.super_setupManager(\"SetupManager\",_t)},Object.defineProperty(Lt.prototype,\"setupMgr\",{get:function(){return this.super_getManager(\"SetupManager\")},enumerable:!0,configurable:!0}),Lt);function Rt(){window.Laya3D?Laya3D.init(J.width,J.height):Laya.init(J.width,J.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=J.scaleMode,Laya.stage.screenMode=J.screenMode,Laya.stage.alignV=J.alignV,Laya.stage.alignH=J.alignH,Laya.URL.exportSceneToJson=J.exportSceneToJson,!J.debug&&\"true\"!=Laya.Utils.getQueryString(\"debug\")||Laya.enableDebugPanel(),J.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),J.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable(\"version.json\",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION),mt.getInstance().setup(Laya.stage,puremvc.Facade.getInstance()),mt.getInstance().setupMgr.setupPlugins(),Q.inst.init(),Q.inst.mPlatAdReady=!1,this.initFont()}new(Rt.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable(\"fileconfig.json\",Laya.Handler.create(this,this.onConfigLoaded))},Rt.prototype.onConfigLoaded=function(){O.ins.loadRes(f.RES_GROUP,L.Handler(this,this.LoadAllGameConfig))},Rt.prototype.LoadAllGameConfig=function(){this.initFGUICfg(),B.inst.EnterGoalGameState(H.Loading)},Rt.prototype.initFGUICfg=function(){fgui.UIConfig.packageFileExtension=\"obj\",fgui.UIConfig.defaultFont=\"huakang\",fgui.UIObjectFactory.setLoaderExtension(U),Laya.stage.addChild(fgui.GRoot.inst.displayObject),Laya.SoundManager.useAudioMusic=!Laya.Browser.onIOS,Laya.SoundManager.autoStopMusic=!0},Rt.prototype.initFont=function(){var t=new Laya.Text;t.text=\"曌\",t.font=\"huakang\"},Rt)}]);","extractedComments":[]}